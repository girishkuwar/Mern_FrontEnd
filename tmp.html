<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ECharts 3D Chart Switcher</title>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/echarts-gl@2.0.9/dist/echarts-gl.min.js"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f5f5f5;
    }
    #controls {
      padding: 10px;
      background: #ffffff;
      text-align: center;
    }
    #chart {
      width: 100%;
      height: 90vh;
    }
  </style>
</head>
<body>

<div id="controls">
  <label for="chartType">Select 3D Chart Type: </label>
  <select id="chartType">
    <option value="bar3D">3D Bar</option>
    <option value="scatter3D">3D Scatter</option>
    <option value="surface3D">3D Surface</option>
  </select>
</div>

<div id="chart"></div>

<script>
  const chart = echarts.init(document.getElementById('chart'));

  // Common axes and grid settings
  const baseOption = {
    tooltip: {},
    xAxis3D: { type: 'value' },
    yAxis3D: { type: 'value' },
    zAxis3D: { type: 'value' },
    grid3D: {
      boxWidth: 120,
      boxDepth: 120,
      viewControl: { autoRotate: true }
    },
    visualMap: {
      show: true,
      max: 20,
      inRange: {
        color: ['#313695', '#74add1', '#abd9e9', '#ffffbf', '#fdae61', '#a50026']
      }
    }
  };

  // Data generators
  function getBarScatterData() {
    const data = [];
    for (let x = 0; x <= 10; x++) {
      for (let y = 0; y <= 10; y++) {
        const z = Math.round(Math.random() * 20);
        data.push([x, y, z]);
      }
    }
    return data;
  }

  function getSurfaceData() {
    const data = [];
    for (let x = 0; x <= 30; x++) {
      for (let y = 0; y <= 30; y++) {
        const z = Math.sin(x / 5) * Math.cos(y / 5) * 10;
        data.push([x, y, z]);
      }
    }
    return data;
  }

  function renderChart(type) {
    let seriesData;
    if (type === 'bar3D') {
      seriesData = [{
        type: 'bar3D',
        shading: 'lambert',
        data: getBarScatterData().map(item => ({ value: item })),
        label: { show: false }
      }];
    } else if (type === 'scatter3D') {
      seriesData = [{
        type: 'scatter3D',
        data: getBarScatterData(),
        symbolSize: 12,
        itemStyle: { color: '#ff6600' }
      }];
    } else if (type === 'surface3D') {
      seriesData = [{
        type: 'surface',
        data: getSurfaceData(),
        shading: 'realistic',
        wireframe: { show: false }
      }];
    }

    chart.setOption({ ...baseOption, series: seriesData }, true);
  }

  // Initial render
  renderChart('bar3D');

  // Dropdown event
  document.getElementById('chartType').addEventListener('change', function () {
    renderChart(this.value);
  });
</script>

</body>
</html>
